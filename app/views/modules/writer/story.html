<div class="top-filter">
    <div class="prefix">
        <i class="fa" ng-class="{'fa-chevron-left': !story.createNew, 'fa-times': story.createNew}"
           ng-click="story.back()"></i>
    </div>
    <div class="title">
        <span ng-show="story.createNew" class="verbose" translate="WRITER.STORIES.BEFORE_NEW_TITLE"></span>
        <span ng-show="!story.createNew" class="verbose" translate="WRITER.STORIES.BEFORE_TITLE"></span>
        <input type="text" ng-model="story.model.title">
    </div>
    <div class="actions">
        <button ng-click="story.save()">
            <i class="fa fa-check"></i>
            <span translate="WRITER.STORIES.SAVE"></span>
        </button>
        <span ng-click="story.toggleSidebar()">
        <i class="fa"
           ng-class="{'fa-search-minus': story.sidebarIsExpanded(), 'inactive fa-search-plus': !story.sidebarIsExpanded()}"></i>
        </span>
    </div>
</div>
<div class="has-aside">
    <div class="content">
        <ul class="story-list" story-collapse>
            <li class="list-item prologue story-list--header">
                <div class="header" ng-class="{'active':story.selectedItem.isItemSelected({id:story.collections.prologue.id})}"
                     ng-click="story.selectedItem.setSelectedItem(null)">
                    <div class="prefix">
                        <i class="fa fa-bars" data-toggle="collection"></i>
                    </div>
                    <div class="title">
                        <span class="separate" translate="WRITER.STORIES.LIST.PROLOGUE"></span>
                    </div>
                </div>
                <scenario-view scenarios="story.model.prologue"></scenario-view>
            </li>
            <li class="list-item scenarios story-list--header">
                <div class="header" ng-class="{'active':story.selectedItem.isItemSelected({id:story.collections.scenarios.id})}"
                     ng-click="story.selectedItem.setSelectedItem(null)">
                    <div class="prefix">
                        <i class="fa fa-bars" data-toggle="collection"></i>
                    </div>
                    <div class="title">
                        <span class="separate" translate="WRITER.STORIES.LIST.SCENARIOS"></span>
                    </div>
                    <div class="actions" ng-show="!story.collections.scenarios.isAdding">
                        <button ng-click="story.add(story.collections.scenarios)">
                            <i class="fa fa-plus"></i>
                            <span translate="WRITER.STORIES.NEW_SCENARIO"></span>
                        </button>
                    </div>
                </div>
                <scenario-view scenarios="story.model.scenarios"></scenario-view>
                <div ng-show="story.collections.scenarios.isAdding" class="story-list--tools selectable"
                     ng-class="{'active':story.selectedItem.isItemSelected({id:story.collections.scenarios.id+'-new'})}"
                     ng-click="story.selectedItem.setSelectedItem({id:story.collections.scenarios.id+'-new'})">
                    <div class="prefix">
                        <i class="fa fa-times" ng-click="story.clear(story.collections.scenarios)"></i>
                    </div>
                    <input class="typeahead" type="text" placeholder="{{'WRITER.STORIES.ENTER_SCENARIO_TITLE' | translate}}" sf-typeahead
                           options="story.typeAheadOptions" datasets="story.stepsDataset" ng-model="story.collections.scenarios.inputValue">
                    <div class="select"></div>
                    <div class="actions">
                        <button ng-click="story.insertObject()">
                            <i class="fa fa-plus"></i>
                            <span translate="WRITER.STORIES.INSERT"></span>
                        </button>
                    </div>
                </div>
            </li>
            <li class="list-item epilogue story-list--header">
                <div class="header" ng-class="{'active':story.selectedItem.isItemSelected({id:story.collections.epilogue.id})}"
                     ng-click="story.selectedItem.setSelectedItem(null)">
                    <div class="prefix">
                        <i class="fa fa-bars" data-toggle="collection"></i>
                    </div>
                    <div class="title">
                        <span class="separate" translate="WRITER.STORIES.LIST.EPILOGUE"></span>
                    </div>
                </div>
                <scenario-view scenarios="story.model.epilogue"></scenario-view>
            </li>
        </ul>
    </div>
    <aside ng-class="{'expand' : story.sidebarIsExpanded()}" sidebar="false" class="aside"></aside>
</div>
<div variable-modal>

</div>


